{
  "ignition": {
    "version": "3.5.0"
  },
  "passwd": {
    "users": [
      {
        "groups": [
          "wheel"
        ],
        "name": "lab",
        "sshAuthorizedKeys": [
          "ssh-ed25519 AAAAC3NzaC1lZDI1NTE5AAAAIDePN3gS12p0WDg0/9DkDZYwfMfb73qT3uW/yGiH+u57 hmlb"
        ],
        "shell": "/bin/bash"
      }
    ]
  },
  "storage": {
    "files": [
      {
        "path": "/etc/hostname",
        "contents": {
          "compression": "",
          "source": "data:,homelab"
        },
        "mode": 420
      },
      {
        "path": "/opt/k3s-install.sh",
        "contents": {
          "compression": "gzip",
          "source": "data:;base64,H4sIAAAAAAAC/2yPMW7DMAxFd53ixx1bW0O29gRFe4OiA20zERFGMkS6TW5fyF46ZCLA//Dx/tMhrlbjKDly/sFIloKxo+cgJ3zhgP6GDdEykW7g5Wj4foMnzgEAeEoF3Xs2J1XJZ3wcDebkMmGUTPU+DEO3odNaFf1neVSZ3Bd7jfEsntZxmMq1vXsp7cTKymRsUcnZPM7lN2uhuYV7dbqWGc+PbAOr8T/V5reLgbQyzXfwTcztBXaRZWkbZJ8zdOEk4S8AAP//+fRhWiYBAAA="
        },
        "mode": 493
      },
      {
        "path": "/etc/zincati/config.d/51-rollout-wariness.toml",
        "contents": {
          "compression": "",
          "source": "data:,%5Bidentity%5D%0Arollout_wariness%20%3D%201.0%0A"
        }
      },
      {
        "path": "/etc/sudoers.d/01-wheel-nopasswd",
        "contents": {
          "compression": "",
          "source": "data:,%25wheel%20ALL%3D(ALL)%20NOPASSWD%3A%20ALL%0A"
        },
        "mode": 288
      }
    ]
  },
  "systemd": {
    "units": [
      {
        "dropins": [
          {
            "contents": "[Service]\nExecStartPre=/usr/bin/mkdir -p /etc/ssh/sshd_config.d\nExecStartPre=/usr/bin/bash -c 'echo \"PasswordAuthentication no\" \u003e /etc/ssh/sshd_config.d/20-password-auth.conf'\n",
            "name": "10-password-auth.conf"
          }
        ],
        "enabled": true,
        "name": "sshd.service"
      },
      {
        "contents": "[Unit]\nDescription=K3s (single node)\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=simple\nExecStartPre=/usr/bin/bash /opt/k3s-install.sh\nExecStart=/usr/local/bin/k3s server --write-kubeconfig-mode 644 --disable traefik\nRestart=on-failure\nRestartSec=5\nStandardOutput=journal\nStandardError=journal\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "k3s.service"
      },
      {
        "enabled": false,
        "mask": true,
        "name": "rpm-ostree-countme.timer"
      },
      {
        "mask": true,
        "name": "docker.service"
      },
      {
        "contents": "[Unit]\nDescription=Send notification on system boot\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nType=oneshot\nExecStart=/usr/bin/curl -d \"homelab is up\" https://ntfy.sh/autism-dweeb-parking0-ladder-appease\nRemainAfterExit=false\nStandardOutput=journal\nStandardError=journal\n\n[Install]\nWantedBy=multi-user.target\n",
        "enabled": true,
        "name": "ntfy.service"
      }
    ]
  }
}
